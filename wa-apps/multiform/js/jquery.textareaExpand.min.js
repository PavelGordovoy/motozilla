// Expanding Textareas v0.2.0
// MIT License
// https://github.com/bgrins/ExpandingTextareas
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function e(c){return"active"===c?!!this.data("expanding"):(this.filter("textarea").each(function(){var d=a(this),e=d.data("expanding");if(e&&"destroy"===c)return e.destroy();if(e&&"refresh"===c)return e.setStyles();if(e&&"update"===c)return e.update();var g=this.offsetWidth>0||this.offsetHeight>0;if(g||f("ExpandingTextareas: attempt to initialize an invisible textarea. Call expanding() again once it has been inserted into the page and/or is visible."),!e&&g){var h=a.extend({},a.expanding,"object"==typeof c&&c);d.data("expanding",new b(d,h))}}),this)}function f(a){window.console&&console.warn&&console.warn(a)}var b=function(b,c){this.$textarea=b,this.$textCopy=a("<span />"),this.$clone=a('<pre class="expanding-clone"><br /></pre>').prepend(this.$textCopy),b.wrap(a('<div class="expanding-wrapper" style="position:relative" />')).after(this.$clone),this.attach(),this.setStyles(),this.update(),"function"==typeof c.update&&b.bind("update.expanding",c.update)};b.DEFAULTS={autoInitialize:!0,initialSelector:"textarea.expanding"},a.expanding=a.extend({},b.DEFAULTS,a.expanding||{});var c=function(){var a=-1;if("Microsoft Internet Explorer"===navigator.appName){var b=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})");null!==c.exec(b)&&(a=parseFloat(RegExp.$1))}return a}(),d="oninput"in document.createElement("input")&&9!==c;b.prototype={attach:function(){var a="input.expanding change.expanding",b=this;d||(a+=" keyup.expanding"),this.$textarea.bind(a,function(){b.update()})},update:function(){this.$textCopy.text(this.$textarea.val().replace(/\r\n/g,"\n")),this.$textarea.triggerHandler("update.expanding",{text:this.$textarea.val(),cloneField:this.$textCopy})},destroy:function(){this.$clone.remove(),this.$textarea.unwrap().attr("style",this._oldTextareaStyles||"").removeData("expanding").unbind("input.expanding change.expanding keyup.expanding update.expanding"),delete this._oldTextareaStyles},setStyles:function(){this._resetStyles(),this._setCloneStyles(),this._setTextareaStyles()},_resetStyles:function(){this._oldTextareaStyles=this.$textarea.attr("style"),this.$textarea.add(this.$clone).css({margin:0,webkitBoxSizing:"border-box",mozBoxSizing:"border-box",boxSizing:"border-box",width:"100%"})},_setCloneStyles:function(){var a={display:"block",border:"0 solid",visibility:"hidden",minHeight:this.$textarea.outerHeight()};"off"===this.$textarea.attr("wrap")?a.overflowX="scroll":a.whiteSpace="pre-wrap",this.$clone.css(a),this._copyTextareaStylesToClone()},_copyTextareaStylesToClone:function(){var b=this,c=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","wordWrap","word-break","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","paddingLeft","paddingRight","paddingTop","paddingBottom","maxHeight"];a.each(c,function(a,c){var d=b.$textarea.css(c);b.$clone.css(c)!==d&&(b.$clone.css(c,d),"maxHeight"===c&&"none"!==d&&b.$clone.css("overflow","hidden"))})},_setTextareaStyles:function(){this.$textarea.css({position:"absolute",top:0,left:0,height:"100%",resize:"none",overflow:"auto"})}},a.fn.expanding=e,a.fn.expanding.Constructor=b,a(function(){a.expanding.autoInitialize&&a(a.expanding.initialSelector).expanding()})});